{
  "annotations": {"list": []},
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 0},
      "id": 1,
      "options": {
        "content": "# üî≠ Distributed Tracing with Tempo\n\nTraces are collected via OpenTelemetry and stored in Grafana Tempo.\n\n## üëâ [Click here to Search Traces in Explore](/explore?schemaVersion=1&panes=%7B%22v1b%22%3A%7B%22datasource%22%3A%22tempo%22%2C%22queries%22%3A%5B%7B%22refId%22%3A%22A%22%2C%22datasource%22%3A%7B%22type%22%3A%22tempo%22%2C%22uid%22%3A%22tempo%22%7D%2C%22queryType%22%3A%22traceqlSearch%22%2C%22limit%22%3A20%7D%5D%2C%22range%22%3A%7B%22from%22%3A%22now-1h%22%2C%22to%22%3A%22now%22%7D%7D%7D&orgId=1)\n\nThe **Explore** view provides the best experience for:\n- Searching traces by service, duration, status\n- Viewing trace timelines and span details\n- Correlating traces with logs",
        "mode": "markdown"
      },
      "title": "",
      "transparent": true,
      "type": "text"
    },
    {
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
      "id": 2,
      "options": {
        "content": "## üì° OTLP Endpoints\n\nSend traces to these endpoints:\n\n| Protocol | Endpoint |\n|----------|----------|\n| **gRPC** | `<oib-host>:4317` |\n| **HTTP** | `http://<oib-host>:4318` |\n\nReplace `<oib-host>` with your OIB server IP/hostname.",
        "mode": "markdown"
      },
      "title": "Integration",
      "type": "text"
    },
    {
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
      "id": 3,
      "options": {
        "content": "## üîß App Configuration\n\nSet these environment variables:\n\n```bash\nexport OTEL_EXPORTER_OTLP_ENDPOINT=http://<oib-host>:4318\nexport OTEL_SERVICE_NAME=my-service\n```\n\nFor Docker containers on oib-network:\n```bash\nOTEL_EXPORTER_OTLP_ENDPOINT=http://oib-alloy-telemetry:4317\n```",
        "mode": "markdown"
      },
      "title": "Environment Variables",
      "type": "text"
    },
    {
      "gridPos": {"h": 17, "w": 8, "x": 0, "y": 16},
      "id": 4,
      "options": {
        "content": "## üìä TraceQL Query Examples\n\nUse these in the Explore view:\n\n```sql\n# All traces\n{}\n\n# By service name\n{resource.service.name=\"my-app\"}\n\n# Slow requests (>100ms)\n{duration > 100ms}\n\n# HTTP errors\n{span.http.status_code >= 400}\n\n# Specific operation\n{name = \"GET /api/users\"}\n```",
        "mode": "markdown"
      },
      "title": "TraceQL Examples",
      "type": "text"
    },
    {
      "gridPos": {"h": 17, "w": 8, "x": 8, "y": 16},
      "id": 5,
      "options": {
        "content": "## üêç Python Example\n\n```python\nfrom opentelemetry import trace\nfrom opentelemetry.sdk.trace import TracerProvider\nfrom opentelemetry.sdk.trace.export import BatchSpanProcessor\nfrom opentelemetry.exporter.otlp.proto.grpc.trace_exporter import OTLPSpanExporter\n\n# Set up the tracer provider\nprovider = TracerProvider()\nexporter = OTLPSpanExporter(\n    endpoint=\"oib-alloy-telemetry:4317\",\n    insecure=True\n)\nprovider.add_span_processor(BatchSpanProcessor(exporter))\ntrace.set_tracer_provider(provider)\n\n# Get a tracer and create spans\ntracer = trace.get_tracer(__name__)\n\nwith tracer.start_as_current_span(\"my-operation\") as span:\n    span.set_attribute(\"key\", \"value\")\n    # Your code here\n```\n\nüìÅ See `examples/python-flask` for complete example",
        "mode": "markdown"
      },
      "title": "Python Code Example",
      "type": "text"
    },
    {
      "gridPos": {"h": 17, "w": 8, "x": 16, "y": 16},
      "id": 6,
      "options": {
        "content": "## üü¢ Node.js Example\n\n**tracing.js** (loaded via `--require`):\n```javascript\nconst { NodeSDK } = require('@opentelemetry/sdk-node');\nconst { getNodeAutoInstrumentations } = require(\n  '@opentelemetry/auto-instrumentations-node');\nconst { OTLPTraceExporter } = require(\n  '@opentelemetry/exporter-trace-otlp-grpc');\nconst grpc = require('@grpc/grpc-js');\n\nconst sdk = new NodeSDK({\n  traceExporter: new OTLPTraceExporter({\n    url: 'http://oib-alloy-telemetry:4317',\n    credentials: grpc.credentials.createInsecure(),\n  }),\n  instrumentations: [getNodeAutoInstrumentations()],\n});\nsdk.start();\n```\n\n**package.json**:\n```json\n\"scripts\": {\n  \"start\": \"node --require ./tracing.js app.js\"\n}\n```\n\nüìÅ See `examples/node-express` for complete example",
        "mode": "markdown"
      },
      "title": "Node.js Code Example",
      "type": "text"
    },
    {
      "gridPos": {"h": 17, "w": 12, "x": 0, "y": 33},
      "id": 7,
      "options": {
        "content": "## üíé Ruby on Rails Example\n\n**config/initializers/opentelemetry.rb**:\n```ruby\nrequire 'opentelemetry/sdk'\nrequire 'opentelemetry/exporter/otlp'\nrequire 'opentelemetry/instrumentation/all'\n\nOpenTelemetry::SDK.configure do |c|\n  c.service_name = ENV.fetch('OTEL_SERVICE_NAME', 'my-rails-app')\n\n  c.add_span_processor(\n    OpenTelemetry::SDK::Trace::Export::BatchSpanProcessor.new(\n      OpenTelemetry::Exporter::OTLP::Exporter.new(\n        endpoint: \"#{ENV['OTEL_EXPORTER_OTLP_ENDPOINT']}/v1/traces\"\n      )\n    )\n  )\n\n  c.use_all  # Auto-instrument Rails, Net::HTTP, etc.\nend\n```\n\nüìÅ See `examples/ruby-rails` for complete example",
        "mode": "markdown"
      },
      "title": "Ruby on Rails Code Example",
      "type": "text"
    },
    {
      "gridPos": {"h": 17, "w": 12, "x": 12, "y": 33},
      "id": 8,
      "options": {
        "content": "## üêò PHP Example\n\n**bootstrap/tracing.php**:\n```php\n<?php\nuse OpenTelemetry\\SDK\\Trace\\TracerProvider;\nuse OpenTelemetry\\SDK\\Trace\\SpanProcessor\\BatchSpanProcessor;\nuse OpenTelemetry\\Contrib\\Otlp\\SpanExporter;\nuse OpenTelemetry\\SDK\\Common\\Export\\Http\\PsrTransportFactory;\n\n$transport = (new PsrTransportFactory())->create(\n    getenv('OTEL_EXPORTER_OTLP_ENDPOINT') . '/v1/traces',\n    'application/json'\n);\n$exporter = new SpanExporter($transport);\n$provider = new TracerProvider(\n    new BatchSpanProcessor($exporter)\n);\n\n// Create spans\n$tracer = $provider->getTracer('my-app');\n$span = $tracer->spanBuilder('my-operation')->startSpan();\n$span->setAttribute('key', 'value');\n// ... your code\n$span->end();\n```\n\nüìÅ See `examples/php-laravel` for complete example",
        "mode": "markdown"
      },
      "title": "PHP Code Example",
      "type": "text"
    }
  ],
  "refresh": false,
  "schemaVersion": 38,
  "tags": ["oib", "telemetry", "tempo", "tracing"],
  "templating": {"list": []},
  "time": {"from": "now-1h", "to": "now"},
  "timepicker": {},
  "timezone": "",
  "title": "OIB - Traces Explorer",
  "uid": "oib-traces-explorer",
  "version": 1
}
